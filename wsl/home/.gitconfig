[init]
	defaultBranch = main

[fetch]
	prune = true

[push]
	autoSetupRemote = true

[commit]
	gpgSign = true
[tag]
	gpgSign = true

[submodule]
	recurse = true

[credential "https://github.com"]
	# set helper to empty to avoid using the default helper
	# ref: https://github.com/cli/cli/issues/3796#issuecomment-1065150465
	helper = 
	helper = !gh auth git-credential
[credential "https://gist.github.com"]
	helper = 
	helper = !gh auth git-credential

[include]
	path = ~/.gitconfig.local

[alias]
	sm = switch main
	sync = !curr=$(git rev-parse --abbrev-ref HEAD) && git fetch --all && git submodule update --init --recursive && git pull --ff-only upstream \"$curr\" && git push origin \"$curr\"
[gpg]
	program = gpg
